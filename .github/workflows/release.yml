name: 'ðŸš€ Release mod'
run-name: >
  release ${{github.repository}} #${{ github.run_number }}

on:
  pull_request:
    branches:
      - main
    types: [ closed ]
      
  workflow_dispatch:

jobs:
  build:
    uses: ./.github/workflows/build-template.yml
    with:
      project-name: jcdcdev.Valheim.Signs
  release:
    uses: ./.github/workflows/release-template.yml
    needs:
      - build
    permissions:
      contents: write
    with:
      mod-name: Signs
      project-namespace: jcdcdev
      project-description: "Add information about your world to signs! Easy to configure and use."
      project-url: "https://github.com/jcdcdev/jcdcdev.Valheim.Signs"
      project-community: "valheim"
      project-categories: |
        mods
        client-side
        tweaks
      mod-version: ${{ needs.build.outputs.mod-version }}
      asset-name: ${{ needs.build.outputs.asset-name }}
    secrets: inherit